<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>FinSeed ‚Äî Educaci√≥n financiera para ni√±os y familias</title>
    <meta name="description" content="FinSeed ense√±a a ni√±os y adolescentes a entender el dinero, invertir con criterio y crear h√°bitos financieros s√≥lidos, junto a sus familias." />
    <meta name="theme-color" content="#0B0F1A" />

    <!-- Open Graph -->
    <meta property="og:title" content="FinSeed ‚Äî Educaci√≥n financiera para ni√±os y familias" />
    <meta property="og:description" content="Aprendizaje gamificado, simulaci√≥n sin riesgo e inversi√≥n gradual con control parental." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://finseed.cl" />

    <!-- Tailwind (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ["ui-sans-serif", "system-ui", "-apple-system", "Segoe UI", "Roboto", "Helvetica", "Arial"],
            },
            colors: {
              fin: {
                bg: "#0B0F1A",
                panel: "#101826",
                line: "rgba(255,255,255,0.10)",
                soft: "rgba(255,255,255,0.06)",
                mint: "#34D399",
                sky: "#60A5FA",
                pink: "#F472B6",
                amber: "#F59E0B",
              },
            },
            boxShadow: {
              glow: "0 0 0 1px rgba(255,255,255,0.08), 0 20px 60px rgba(0,0,0,0.55)",
            },
          },
        },
      };
    </script>

    <style>
      html { scroll-behavior: smooth; }
      .glass {
        background: rgba(16, 24, 38, 0.65);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255,255,255,0.10);
      }
      .gridGlow:before{
        content:"";
        position:absolute; inset:0;
        background:
          radial-gradient(800px 400px at 15% 10%, rgba(96,165,250,0.20), transparent 60%),
          radial-gradient(700px 350px at 85% 20%, rgba(244,114,182,0.16), transparent 60%),
          radial-gradient(800px 500px at 50% 85%, rgba(52,211,153,0.14), transparent 60%),
          linear-gradient(to bottom, rgba(255,255,255,0.05), transparent);
        pointer-events:none;
      }
      .noise:after{
        content:"";
        position:absolute; inset:0;
        background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='220' height='220'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='220' height='220' filter='url(%23n)' opacity='.12'/%3E%3C/svg%3E");
        opacity:.35; mix-blend-mode: overlay; pointer-events:none;
      }
    </style>
  </head>

  <body class="bg-fin-bg text-white font-sans">
    <!-- Top bar -->
    <header class="sticky top-0 z-40 border-b border-fin-line bg-fin-bg/70 backdrop-blur">
      <div class="mx-auto max-w-6xl px-4 py-3 flex items-center justify-between">
        <a href="#top" class="flex items-center gap-2">
          <div class="h-9 w-9 rounded-xl bg-white/10 border border-white/10 flex items-center justify-center shadow-glow">
            <span class="text-lg">üå±</span>
          </div>
          <div class="leading-tight">
            <div class="font-semibold">FinSeed</div>
            <div class="text-xs text-white/60 -mt-0.5">Pilot + Demo</div>
          </div>
        </a>

        <nav class="hidden md:flex items-center gap-6 text-sm text-white/70">
          <a class="hover:text-white" href="#problema">Problema</a>
          <a class="hover:text-white" href="#solucion">Soluci√≥n</a>
          <a class="hover:text-white" href="#como-funciona">C√≥mo funciona</a>
          <a class="hover:text-white" href="#demo">Demo</a>
          <a class="hover:text-white" href="#faq">FAQ</a>
        </nav>

        <div class="flex items-center gap-2">
          <button
            id="btnDemoTop"
            class="px-4 py-2 rounded-xl bg-white text-fin-bg font-semibold hover:bg-white/90 transition shadow-glow"
          >
            Ver demo
          </button>
        </div>
      </div>
    </header>

    <!-- Hero -->
    <main id="top" class="relative overflow-hidden">
      <section class="relative gridGlow noise">
        <div class="mx-auto max-w-6xl px-4 py-14 md:py-20 relative">
          <div class="grid md:grid-cols-2 gap-10 items-center">
            <div>
              <div class="inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs text-white/70">
                <span class="text-fin-mint">‚óè</span> Cupos limitados para piloto (familias y colegios)
              </div>

              <h1 class="mt-5 text-4xl md:text-6xl font-bold tracking-tight">
                Educaci√≥n financiera real
                <span class="block text-white/80">para ni√±os y familias</span>
              </h1>

              <p class="mt-5 text-lg text-white/70 leading-relaxed">
                FinSeed ense√±a a ni√±os y adolescentes a entender el dinero, invertir con criterio y crear h√°bitos financieros s√≥lidos,
                junto a sus familias.
              </p>

              <div class="mt-8 flex flex-col sm:flex-row gap-3">
                <button
                  id="btnPrimary"
                  class="px-5 py-3 rounded-xl bg-white text-fin-bg font-semibold hover:bg-white/90 transition shadow-glow"
                >
                  Quiero ver el demo (2 min)
                </button>

                <a
                  href="#piloto"
                  class="px-5 py-3 rounded-xl border border-white/15 bg-white/5 hover:bg-white/10 transition text-white/90"
                >
                  Postular al piloto
                </a>
              </div>

              <div class="mt-6 flex flex-wrap gap-2 text-sm text-white/70">
                <span class="px-3 py-1 rounded-full border border-white/10 bg-white/5">üéÆ Aprendizaje gamificado</span>
                <span class="px-3 py-1 rounded-full border border-white/10 bg-white/5">üß™ Simulaci√≥n sin riesgo</span>
                <span class="px-3 py-1 rounded-full border border-white/10 bg-white/5">üß≠ Control parental</span>
              </div>
            </div>

            <!-- Right: ‚ÄúLovable vibe‚Äù cards -->
            <div class="relative">
              <div class="glass rounded-3xl p-6 shadow-glow">
                <div class="flex items-center justify-between">
                  <div class="text-sm text-white/70">Vista previa (concepto)</div>
                  <div class="text-xs text-white/50">FinSeed ‚Ä¢ Demo</div>
                </div>

                <div class="mt-4 grid gap-3">
                  <div class="rounded-2xl bg-white/5 border border-white/10 p-4">
                    <div class="flex items-center justify-between">
                      <div class="font-semibold">üå≥ Portafolio de Clemente</div>
                      <div class="text-fin-mint font-semibold">+3.2%</div>
                    </div>
                    <div class="mt-2 text-sm text-white/70">
                      ‚ÄúMira c√≥mo crece tu √°rbol de inversiones.‚Äù
                    </div>
                    <div class="mt-3 h-2 rounded-full bg-white/10 overflow-hidden">
                      <div class="h-2 bg-fin-mint w-[62%]"></div>
                    </div>
                  </div>

                  <div class="rounded-2xl bg-white/5 border border-white/10 p-4">
                    <div class="font-semibold">‚ú® Escribe tu sue√±o</div>
                    <div class="mt-2 text-sm text-white/70">
                      Ej: ‚ÄúComprar una bicicleta üö≤‚Äù y ver el progreso.
                    </div>
                    <div class="mt-3 flex gap-2">
                      <div class="px-3 py-2 rounded-xl bg-white/10 border border-white/10 text-sm w-full text-white/70">Mi sue√±o es‚Ä¶</div>
                      <div class="px-4 py-2 rounded-xl bg-fin-sky/90 text-fin-bg font-semibold">Enviar</div>
                    </div>
                  </div>

                  <div class="rounded-2xl bg-white/5 border border-white/10 p-4">
                    <div class="flex items-center gap-2">
                      <span class="text-fin-amber">‚òÖ</span>
                      <div class="font-semibold">Mis sue√±os</div>
                      <span class="text-xs text-white/60">(se guardan)</span>
                    </div>
                    <div class="mt-2 text-sm text-white/70">
                      La app transforma sue√±os en metas y h√°bitos.
                    </div>
                  </div>
                </div>

                <div class="mt-5 flex gap-3">
                  <button id="btnDemoCard" class="w-full px-4 py-3 rounded-xl bg-white text-fin-bg font-semibold hover:bg-white/90 transition">
                    Probar demo ahora
                  </button>
                </div>

                <p class="mt-3 text-xs text-white/50">
                  *Esta landing es para captar early adopters y derivarlos al demo.
                </p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Sections -->
      <section id="problema" class="mx-auto max-w-6xl px-4 py-14">
        <div class="grid md:grid-cols-2 gap-8 items-start">
          <div>
            <h2 class="text-2xl md:text-3xl font-bold">El problema</h2>
            <p class="mt-3 text-white/70 leading-relaxed">
              En el colegio no se ense√±a educaci√≥n financiera real. Los ni√±os aprenden tarde (o aprenden mal).
              Y muchos padres no saben c√≥mo ense√±ar inversi√≥n sin riesgo.
            </p>
          </div>
          <div class="grid gap-3">
            <div class="glass rounded-2xl p-5">
              <div class="font-semibold">üòµ Falta de m√©todo</div>
              <div class="mt-1 text-white/70 text-sm">Informaci√≥n dispersa y sin gu√≠a pr√°ctica.</div>
            </div>
            <div class="glass rounded-2xl p-5">
              <div class="font-semibold">üß® Riesgo y ansiedad</div>
              <div class="mt-1 text-white/70 text-sm">Invertir ‚Äúa ciegas‚Äù genera miedo o errores.</div>
            </div>
            <div class="glass rounded-2xl p-5">
              <div class="font-semibold">üìâ Sin h√°bitos</div>
              <div class="mt-1 text-white/70 text-sm">No hay rutina: ahorrar, planificar, constancia.</div>
            </div>
          </div>
        </div>
      </section>

      <section id="solucion" class="mx-auto max-w-6xl px-4 pb-14">
        <div class="glass rounded-3xl p-8 md:p-10 shadow-glow">
          <div class="flex items-center gap-3">
            <div class="h-10 w-10 rounded-2xl bg-white/10 border border-white/10 flex items-center justify-center">‚úÖ</div>
            <h2 class="text-2xl md:text-3xl font-bold">La soluci√≥n</h2>
          </div>

          <div class="mt-6 grid md:grid-cols-3 gap-4">
            <div class="rounded-2xl bg-white/5 border border-white/10 p-5">
              <div class="text-lg font-semibold">üéÆ Gamificaci√≥n</div>
              <p class="mt-2 text-white/70 text-sm">Aprender con misiones, progreso y motivaci√≥n.</p>
            </div>
            <div class="rounded-2xl bg-white/5 border border-white/10 p-5">
              <div class="text-lg font-semibold">üß™ Simulaci√≥n sin riesgo</div>
              <p class="mt-2 text-white/70 text-sm">Practicar antes de invertir de verdad.</p>
            </div>
            <div class="rounded-2xl bg-white/5 border border-white/10 p-5">
              <div class="text-lg font-semibold">üß≠ Control parental</div>
              <p class="mt-2 text-white/70 text-sm">Inversi√≥n gradual y acompa√±ada por la familia.</p>
            </div>
          </div>

          <div class="mt-8 flex flex-col sm:flex-row gap-3">
            <button id="btnPrimary2" class="px-5 py-3 rounded-xl bg-white text-fin-bg font-semibold hover:bg-white/90 transition">
              Ver demo (sin instalar nada)
            </button>
            <a href="#piloto" class="px-5 py-3 rounded-xl border border-white/15 bg-white/5 hover:bg-white/10 transition">
              Postular al piloto
            </a>
          </div>
        </div>
      </section>

      <section id="como-funciona" class="mx-auto max-w-6xl px-4 pb-14">
        <h2 class="text-2xl md:text-3xl font-bold">C√≥mo funciona</h2>
        <p class="mt-2 text-white/70">La misma l√≥gica que ver√°s en el demo (Lovable).</p>

        <div class="mt-6 grid md:grid-cols-3 gap-4">
          <div class="glass rounded-2xl p-6">
            <div class="text-sm text-white/60">Paso 1</div>
            <div class="mt-2 font-semibold text-lg">Definir un sue√±o</div>
            <p class="mt-2 text-white/70 text-sm">‚ÄúMi sue√±o es‚Ä¶‚Äù (ej: bicicleta, viaje, consola).</p>
          </div>
          <div class="glass rounded-2xl p-6">
            <div class="text-sm text-white/60">Paso 2</div>
            <div class="mt-2 font-semibold text-lg">Simular y aprender</div>
            <p class="mt-2 text-white/70 text-sm">Portafolio virtual + h√°bitos + misiones.</p>
          </div>
          <div class="glass rounded-2xl p-6">
            <div class="text-sm text-white/60">Paso 3</div>
            <div class="mt-2 font-semibold text-lg">Invertir con control</div>
            <p class="mt-2 text-white/70 text-sm">Gradual y acompa√±ado (familia/colegio).</p>
          </div>
        </div>
      </section>

      <section id="demo" class="mx-auto max-w-6xl px-4 pb-14">
        <div class="grid md:grid-cols-2 gap-8 items-center">
          <div>
            <h2 class="text-2xl md:text-3xl font-bold">Demo interactivo</h2>
            <p class="mt-3 text-white/70 leading-relaxed">
              Si te interesa de verdad, entra al demo: en 2 minutos vas a entender el concepto completo.
            </p>
            <ul class="mt-4 space-y-2 text-white/70">
              <li>‚úÖ Dise√±ado para ni√±os, padres y colegios</li>
              <li>‚úÖ Visual: metas, sue√±os, progreso y ‚Äú√°rbol‚Äù</li>
              <li>‚úÖ Enfoque educativo (no promesas irreales)</li>
            </ul>
            <div class="mt-6 flex gap-3">
              <button id="btnDemoSection" class="px-5 py-3 rounded-xl bg-white text-fin-bg font-semibold hover:bg-white/90 transition">
                Abrir demo ahora
              </button>
              <button id="btnLeadOnly" class="px-5 py-3 rounded-xl border border-white/15 bg-white/5 hover:bg-white/10 transition">
                Solo dejar mis datos
              </button>
            </div>
          </div>

          <div class="glass rounded-3xl p-6 shadow-glow">
            <div class="text-sm text-white/70">Lo que obtienes al ser early user</div>
            <div class="mt-4 grid gap-3">
              <div class="rounded-2xl bg-white/5 border border-white/10 p-4">
                <div class="font-semibold">üéÅ Acceso preferente</div>
                <div class="text-sm text-white/70 mt-1">Cupos limitados y onboarding guiado.</div>
              </div>
              <div class="rounded-2xl bg-white/5 border border-white/10 p-4">
                <div class="font-semibold">üß† Feedback directo</div>
                <div class="text-sm text-white/70 mt-1">Tu opini√≥n define el producto final.</div>
              </div>
              <div class="rounded-2xl bg-white/5 border border-white/10 p-4">
                <div class="font-semibold">üè´ Pilotos con colegios</div>
                <div class="text-sm text-white/70 mt-1">Versi√≥n educativa para instituciones.</div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="piloto" class="mx-auto max-w-6xl px-4 pb-14">
        <div class="glass rounded-3xl p-8 md:p-10">
          <h2 class="text-2xl md:text-3xl font-bold">Piloto FinSeed</h2>
          <p class="mt-2 text-white/70">
            Estamos abriendo cupos limitados para familias y colegios que quieran participar en el piloto inicial.
          </p>

          <div class="mt-6 grid md:grid-cols-2 gap-6">
            <!-- Option A: Inline form (local storage + redirect) -->
            <div class="rounded-2xl bg-white/5 border border-white/10 p-6">
              <div class="font-semibold text-lg">Deja tus datos (r√°pido)</div>
              <p class="text-sm text-white/70 mt-1">Te redirigimos al demo despu√©s de enviar.</p>

              <form id="leadForm" class="mt-4 space-y-3">
                <div>
                  <label class="text-xs text-white/60">Nombre</label>
                  <input id="name" class="mt-1 w-full rounded-xl bg-white/10 border border-white/10 px-4 py-3 outline-none focus:ring-2 focus:ring-white/30" placeholder="Ej: Clemente Barella" required />
                </div>
                <div>
                  <label class="text-xs text-white/60">Email</label>
                  <input id="email" type="email" class="mt-1 w-full rounded-xl bg-white/10 border border-white/10 px-4 py-3 outline-none focus:ring-2 focus:ring-white/30" placeholder="tu@email.com" required />
                </div>
                <div class="grid grid-cols-2 gap-3">
                  <div>
                    <label class="text-xs text-white/60">Rol</label>
                    <select id="role" class="mt-1 w-full rounded-xl bg-white/10 border border-white/10 px-4 py-3 outline-none focus:ring-2 focus:ring-white/30">
                      <option>Padre / Madre</option>
                      <option>Estudiante</option>
                      <option>Colegio</option>
                      <option>Otro</option>
                    </select>
                  </div>
                  <div>
                    <label class="text-xs text-white/60">Edad del hijo/a</label>
                    <input id="kidAge" type="number" min="4" max="18" class="mt-1 w-full rounded-xl bg-white/10 border border-white/10 px-4 py-3 outline-none focus:ring-2 focus:ring-white/30" placeholder="8 - 18" />
                  </div>
                </div>

                <button class="w-full px-5 py-3 rounded-xl bg-white text-fin-bg font-semibold hover:bg-white/90 transition" type="submit">
                  Enviar y entrar al demo
                </button>

                <p class="text-xs text-white/50">
                  Al enviar, aceptas ser contactado/a para el piloto. No vendemos tus datos.
                </p>
              </form>
            </div>

            <!-- Option B: Google Form embed (immediate spreadsheet capture) -->
            <div class="rounded-2xl bg-white/5 border border-white/10 p-6">
              <div class="font-semibold text-lg">Registro oficial (Google Form)</div>
              <p class="text-sm text-white/70 mt-1">
                Esto guarda respuestas directo en tu Google Sheets.
              </p>

              <!-- Replace with your ‚Äúembed‚Äù link if you want.
                   Current link: you shared viewform. Embed normally is /viewform?embedded=true
              -->
              <div class="mt-4 overflow-hidden rounded-2xl border border-white/10">
                <iframe
                  title="Registro Piloto FinSeed"
                  src="https://docs.google.com/forms/d/e/1FAIpQLScffbTvQpp_UMiCGRhiI36f4kHkeG3riBNpgLqx1Mq4217Y7Q/viewform?embedded=true"
                  width="100%"
                  height="520"
                  frameborder="0"
                  marginheight="0"
                  marginwidth="0"
                  class="bg-white"
                >
                  Cargando‚Ä¶
                </iframe>
              </div>

              <div class="mt-4">
                <button id="btnDemoAfterForm" class="w-full px-5 py-3 rounded-xl border border-white/15 bg-white/5 hover:bg-white/10 transition">
                  Ya me registr√© ‚Üí abrir demo
                </button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="faq" class="mx-auto max-w-6xl px-4 pb-16">
        <h2 class="text-2xl md:text-3xl font-bold">Preguntas frecuentes</h2>
        <div class="mt-6 grid md:grid-cols-2 gap-4">
          <details class="glass rounded-2xl p-6">
            <summary class="cursor-pointer font-semibold">¬øEsto es inversi√≥n real?</summary>
            <p class="mt-2 text-white/70 text-sm">El demo es educativo. La idea final combina aprendizaje + control parental + gradualidad.</p>
          </details>
          <details class="glass rounded-2xl p-6">
            <summary class="cursor-pointer font-semibold">¬øSirve para colegios?</summary>
            <p class="mt-2 text-white/70 text-sm">S√≠: el piloto incluye opci√≥n para colegios interesados en educaci√≥n financiera moderna.</p>
          </details>
          <details class="glass rounded-2xl p-6">
            <summary class="cursor-pointer font-semibold">¬øQu√© edad recomienda?</summary>
            <p class="mt-2 text-white/70 text-sm">Enfoque principal: 8 a 18 a√±os (con acompa√±amiento de familia).</p>
          </details>
          <details class="glass rounded-2xl p-6">
            <summary class="cursor-pointer font-semibold">¬øQu√© pasa con mis datos?</summary>
            <p class="mt-2 text-white/70 text-sm">Solo para contacto del piloto. Puedes pedir eliminaci√≥n cuando quieras.</p>
          </details>
        </div>
      </section>

      <footer class="border-t border-fin-line">
        <div class="mx-auto max-w-6xl px-4 py-10 flex flex-col md:flex-row gap-4 md:items-center md:justify-between text-sm text-white/60">
          <div>¬© <span id="year"></span> FinSeed ‚Äî Pilot & Demo</div>
          <div class="flex gap-4">
            <a class="hover:text-white" href="#top">Volver arriba</a>
            <a class="hover:text-white" href="#piloto">Piloto</a>
          </div>
        </div>
      </footer>
    </main>

    <!-- Lead Modal -->
    <div id="modal" class="fixed inset-0 z-50 hidden items-center justify-center">
      <div id="modalBg" class="absolute inset-0 bg-black/70"></div>
      <div class="relative w-[92%] max-w-xl glass rounded-3xl p-6 shadow-glow">
        <div class="flex items-start justify-between gap-4">
          <div>
            <div class="text-xs text-white/60">Acceso anticipado</div>
            <div class="text-xl font-bold mt-1">Entra al demo (y guarda tu cupo)</div>
            <div class="text-sm text-white/70 mt-1">D√©janos tus datos y te mandamos prioridad para el piloto.</div>
          </div>
          <button id="closeModal" class="h-10 w-10 rounded-xl bg-white/10 border border-white/10 hover:bg-white/15">‚úï</button>
        </div>

        <form id="modalForm" class="mt-4 space-y-3">
          <div>
            <label class="text-xs text-white/60">Nombre</label>
            <input id="mName" class="mt-1 w-full rounded-xl bg-white/10 border border-white/10 px-4 py-3 outline-none focus:ring-2 focus:ring-white/30" placeholder="Ej: Clemente" required />
          </div>
          <div>
            <label class="text-xs text-white/60">Email</label>
            <input id="mEmail" type="email" class="mt-1 w-full rounded-xl bg-white/10 border border-white/10 px-4 py-3 outline-none focus:ring-2 focus:ring-white/30" placeholder="tu@email.com" required />
          </div>
          <div class="grid grid-cols-2 gap-3">
            <div>
              <label class="text-xs text-white/60">Rol</label>
              <select id="mRole" class="mt-1 w-full rounded-xl bg-white/10 border border-white/10 px-4 py-3 outline-none focus:ring-2 focus:ring-white/30">
                <option>Padre / Madre</option>
                <option>Estudiante</option>
                <option>Colegio</option>
                <option>Otro</option>
              </select>
            </div>
            <div>
              <label class="text-xs text-white/60">Edad hijo/a</label>
              <input id="mKidAge" type="number" min="4" max="18" class="mt-1 w-full rounded-xl bg-white/10 border border-white/10 px-4 py-3 outline-none focus:ring-2 focus:ring-white/30" placeholder="8 - 18" />
            </div>
          </div>

          <button class="w-full px-5 py-3 rounded-xl bg-white text-fin-bg font-semibold hover:bg-white/90 transition" type="submit">
            Enviar y abrir demo
          </button>

          <p class="text-xs text-white/50">
            No vendemos datos. Solo contacto para el piloto.
          </p>
        </form>
      </div>
    </div>

    <script>
      const DEMO_URL = "https://finseed-grow-family.lovable.app";

      // OPTIONAL: if you later create a tracking endpoint (Google Apps Script / server), put it here.
      // Leave empty to disable.
      const TRACK_ENDPOINT = ""; // e.g. "https://script.google.com/macros/s/XXXX/exec"

      const $ = (id) => document.getElementById(id);

      function openModal() {
        $("modal").classList.remove("hidden");
        $("modal").classList.add("flex");
      }
      function closeModal() {
        $("modal").classList.add("hidden");
        $("modal").classList.remove("flex");
      }

      function safeJSONParse(v) { try { return JSON.parse(v); } catch { return null; } }

      function saveLead(lead) {
        const key = "finseed_leads";
        const existing = safeJSONParse(localStorage.getItem(key)) || [];
        existing.unshift({ ...lead, createdAt: new Date().toISOString() });
        localStorage.setItem(key, JSON.stringify(existing));
      }

      async function track(eventName, payload = {}) {
        if (!TRACK_ENDPOINT) return;
        try {
          await fetch(TRACK_ENDPOINT, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ event: eventName, ...payload, ts: Date.now(), page: location.href }),
            mode: "no-cors",
          });
        } catch {}
      }

      function goToDemo() {
        // small delay so user perceives confirmation
        setTimeout(() => { window.location.href = DEMO_URL; }, 350);
      }

      function bindLeadForm(formId, map) {
        const form = $(formId);
        form.addEventListener("submit", async (e) => {
          e.preventDefault();
          const lead = map();
          saveLead(lead);
          await track("lead_submitted", lead);
          goToDemo();
        });
      }

      // Buttons -> modal
      ["btnPrimary","btnPrimary2","btnDemoTop","btnDemoCard","btnDemoSection","btnLeadOnly"].forEach((id) => {
        const el = $(id);
        if (el) el.addEventListener("click", openModal);
      });

      // direct demo after google form
      $("btnDemoAfterForm")?.addEventListener("click", async () => {
        await track("demo_opened_after_google_form");
        window.location.href = DEMO_URL;
      });

      // Modal close
      $("closeModal").addEventListener("click", closeModal);
      $("modalBg").addEventListener("click", closeModal);
      document.addEventListener("keydown", (e) => { if (e.key === "Escape") closeModal(); });

      // Forms
      bindLeadForm("leadForm", () => ({
        name: $("name").value.trim(),
        email: $("email").value.trim(),
        role: $("role").value,
        kidAge: $("kidAge").value ? Number($("kidAge").value) : null,
        source: "inline_form",
      }));

      bindLeadForm("modalForm", () => ({
        name: $("mName").value.trim(),
        email: $("mEmail").value.trim(),
        role: $("mRole").value,
        kidAge: $("mKidAge").value ? Number($("mKidAge").value) : null,
        source: "modal",
      }));

      // Year
      $("year").textContent = new Date().getFullYear();

      // Track demo interest
      track("page_view");
    </script>
  </body>
</html>
